!!!

= include_gon

%html{:lang => "en"}
  %head
    %meta{:content => "text/html; charset=UTF-8", "http-equiv" => "Content-Type"}/
    %meta{:charset => "utf-8"}/
    %title Search
    %meta{:content => "width=device-width, initial-scale=1", :name => "viewport"}/
    %link{:href => "https://fonts.googleapis.com/css?family=Open+Sans", :rel => "stylesheet"}/
  %body
    = link_to("Log out", {:action => "logout"}, {:id => "Log out"})
    %h3 Wishlist Test:
    - @wishlists.each do |wl|
      %div
      - for i in 0..wl.bird_ids.length-1
        - bird = Bird.find_by_id(wl.bird_ids[i])
        - seen = wl.seens[i]
        %td= "#{bird.name} -> #{seen}, "
    %h1.align
      .grid
        %form.search{:form_tag => '/explore/search' }
          .form__field
            %input.form__input{:name => "search", :placeholder => "Enter the bird name here...", :type => "search", :text_field_tag => 'search'}/
            %input.button{:class => "search_submit", :type => "submit", :value => "Search", :submit_tag => 'Search'}/
    #map
    - if flash[:alert] != ""
      %h3= flash[:alert] 
    %script{:async => "", :defer => "defer", :src => "https://maps.googleapis.com/maps/api/js?key=AIzaSyAZAXAHxRrKlhRSya8IoRc2goYTuUi3ISE&callback=initMap"}
      :cdata
      
      
  .tabs
    .tab
      %input#tab-1{:checked => "checked", :name => "tab-group-1", :type => "radio"}/
      %label{:for => "tab-1"} Search
      .content
        stuff
    .tab
      %input#tab-2{:name => "tab-group-1", :type => "radio"}/
      %label{:for => "tab-2"} Wishlist
      .content
        stuff
    .tab
      %input#tab-3{:name => "tab-group-1", :type => "radio"}/
      %label{:for => "tab-3"} Setting
      .content
        stuff
:javascript
  $(document).ready(function() {
      $('.search').on('submit', function(e) {
          // var data = $("#login_form :input").serializeArray();
          input = input = $('.form__input').val()
          long = $('#long').val()
          lat = $('#lat').val()
          radius = 10.0
          time = 30
          url = window.location.hostname + "/eBirdData/NearestBirds/lng=" + long + "&lat=" + lat + "&r=" + radius + "&t=" + time
          //alert(window.location.protocol + 'asd')
          //alert(url)
          $.ajax({
          	url: url
          	// "BIrdGo.com/eBirdData/NearesrBIrds/lng=xxx&lat=xxx&r=xxx&t=xxx"
          	dataType: "json",
          	success: data_handler()
          	error: function() {

          	}
          })
          return false;
      });
  });

%input{:type =>"hidden", :value =>@birds, :id => "search_result"}

%body{:onload => "initGeolocation();"}
  %input#long{:name => "long", :type =>"text", :value => ""}/
  %input#lat{:name => "lat", :type =>"text", :value => ""}/


// reference: https://css-tricks.com/functional-css-tabs-revisited/